роцедура СформироватьПечатнуюформу (Массивобъектов, ПараметрыПечати, КоллекцияПечатныхформ, ИмяМакета, Синониммакета, Объектыпечати, ПараметрыВывода)
ункция Получить ТаблицуСведенийСчетаНаОплату (Знач МассивДокументов, СоответствиеДокументовиСчетов = Неопределено, ДокументыБезСчетовНаОплату = Неопределено) Экспорт
Установить Привилегированный Режим (Истина) :
ТаблицаСведений = Печать ТорговыхДокументов. ПолучитьОписаниеСчетаНаОплату () ;
Запрос - Новый Запрос;
Запрос. УстановитьПараметр ("МассивДокументов", МассивДокументов) :
Запрос. УстановитьПараметр ("ДополнительнаяКолонкаПечатныхФормДокументов", Константы. Дополнительная КолонкаПечатныхформДокументов. Получить () ) ;
Запрос. Текст - Получить ТекстЗапросаДляформированияТаблицыСве денийСчетаНаОплату () ;
РезультатЗапроса - Запрос. ВыполнитьПакет () :
Выборка = Результат3апроса [1]. Выбрать () ;
СтрокиДокументов = Результат3апроса [2] . Выгрузить () :
СтрокиДокументов. Индексы. Добавить ("Документ") ;
Дополнительные РеквизитЫ - Результат3апроса [3]. Выгрузить () :
Дополнительные Реквизиты. Индексы. Добавить ("Документ") ;
Реквизиты@Кода = Справочники. РеквизитыкодаДляОплаты. СписокРеквизитов () ;
Пока Выборка. Следующий () Цикл
Сведения Документе = ТаблицаСведений. Добавить () ;
Заполнить ЗначенияСвойств (Сведения Документе, Выборка) ;
ТаблицаДокумента = Печать ТорговыхДокументов. Получить ОписаниеТаблицыСчетаНаОплату () ;
Отбор = Новый Структура ("Документ", Выборка. Документ) :
СтрокиДокумента = СтрокиДокументов . НайтиСтроки (Отбор) ;
Для Каждого Строка Из Строкидокумента цикл
СтрокаТаблицыДокумента = ТаблицаДокумента. Добавить () ;
Заполнить ЗначенияСвойств (СтрокатаблицыДокумента, Строка) ;
КонецЦикла ;
Сведения Документе. ТаблицаДокумента = ТаблицаДокумента;
Строкидополнительные Реквизиты = Дополнительные Реквизиты. НайтиСтроки (Отбор) :
Для каждого
Строка
Из СтрокиДополнитель ные Реквизиты Цикл
Сведения Документе. Дополнительные РеквизитЫ кода. Вставить (Реквизиты Кода [Строка. Реквизит] . Идентификатор, Строка. Значение) ;
КонецЦикла ;
ПорядокЗаполнения
= Новый Структура ("Заполнять Руководителя, Заполнять ГлавногоБухгалтера") ;
Печать ТорговыхДокументов. ЗаполнитьДанныеОтветственныхЛиЦ (Сведения Документе, ПорядокЗаполнения) ;
Если НЕ ЗначениеЗаполнено (Сведения Документе. РуководительДолжность наименование) Тогда Если ОбщегоНазначения. Значение РеквизитаОбъекта (Сведения Документе. Получатель,.
"ЮридическоефизическоеЛицо" )
= Перечисления . Юридическоефизиче скоелицо . ФизическоеЛицо
Сведения Документе. РуководительДолжностьнаименование =
"Индивидуальный предприниматель";
КонецЕсли;
КонецЕсли;
КонецЦикла;
Возврат ТаблицаСведений;
КонецФункции
